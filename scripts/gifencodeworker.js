importScripts("../lib/gifencoder/LZWEncoder.js","../lib/gifencoder/NeuQuant.js","../lib/gifencoder/GIFEncoder.js");var encoder;onmessage=function(e){0===e.data.frameIndex&&(encoder=new GIFEncoder,encoder.setSize(e.data.width,e.data.height),encoder.setRepeat(0),encoder.setQuality(e.data.quality),encoder.start()),encoder.setDelay(e.data.delay),encoder.addFrame(e.data.imgData,!0),e.data.lastFrame&&encoder.finish();var a="";e.data.lastFrame&&(a=encoder.stream().getData()),postMessage({progress:e.data.progress,frameIndex:e.data.frameIndex,frameData:a,complete:e.data.lastFrame})};